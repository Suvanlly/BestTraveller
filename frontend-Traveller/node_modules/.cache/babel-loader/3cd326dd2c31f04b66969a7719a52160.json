{"ast":null,"code":"var _jsxFileName = \"/Users/sophiesun/Desktop/BestTraveller/frontend-Traveller/src/components/Register/Register.jsx\";\n\n/* eslint-disable node/no-unsupported-features/es-syntax */\nimport React from \"react\";\nimport swal from \"sweetalert\";\nimport { register } from \"../../api/api\";\nimport validation from \"./Validation\";\nimport closeIcon from \"./img/cancel.png\";\nimport { Card, Title, InputContainer, Label, Input, Button, Close, CloseIcon, Error } from \"./styles/register\";\nimport RegisterSuccessful from \"./RegisterSuccessful\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialData = {\n  value: \"\",\n  blurred: false,\n  touched: false\n};\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: true,\n      isRegister: false,\n      data: {\n        firstName: initialData,\n        lastName: initialData,\n        email: initialData,\n        password: initialData,\n        confirmPassword: initialData\n      },\n      isFormSubmit: false\n    };\n    this.handleShowModalChange = this.handleShowModalChange.bind(this);\n    this.handleDataChange = this.handleDataChange.bind(this);\n    this.handleIsFormSubmitChange = this.handleIsFormSubmitChange.bind(this);\n    this.handleBlurredChange = this.handleBlurredChange.bind(this);\n  }\n\n  handleShowModalChange(newShowModal) {\n    this.setState({\n      showModal: newShowModal\n    });\n  }\n\n  handleIsFormSubmitChange(newIsFormSubmit) {\n    this.setState({\n      isFormSubmit: newIsFormSubmit\n    });\n  }\n\n  handleDataChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setData(name, {\n      value,\n      touched: true\n    });\n  }\n\n  handleBlurredChange(e) {\n    const {\n      name\n    } = e.target;\n    this.setData(name, {\n      blurred: true\n    });\n  }\n\n  setData(name, newData) {\n    this.setState(prevState => ({\n      data: { ...prevState.data,\n        [name]: { ...prevState.data[name],\n          ...newData\n        }\n      }\n    }));\n  }\n\n  getErrorMessage(error, name) {\n    const {\n      data,\n      isFormSubmit\n    } = this.state;\n    return (data[name].blurred || isFormSubmit) && error[name];\n  } // Derived state\n\n\n  validation() {\n    const {\n      data\n    } = this.state;\n    const error = {};\n    Object.keys(data).forEach(name => {\n      const errorOfName = validation(name, data);\n\n      if (!errorOfName) {\n        return;\n      }\n\n      error[name] = errorOfName;\n    });\n    return error;\n  }\n\n  signUp(inputData) {\n    register(inputData).then(res => {\n      this.setState({\n        isRegister: true\n      });\n    }).catch(err => {\n      swal(\"Oops\", \"This email address is already exist\", \"error\");\n    });\n  }\n\n  render() {\n    const {\n      showModal,\n      data,\n      isRegister\n    } = this.state;\n    const error = this.validation(data);\n    let component;\n\n    if (showModal === true && isRegister === false) {\n      component = /*#__PURE__*/_jsxDEV(Card, {\n        onSubmit: e => {\n          e.preventDefault();\n          this.handleIsFormSubmitChange(true);\n          this.signUp(data);\n        },\n        children: [/*#__PURE__*/_jsxDEV(Close, {\n          onClick: () => this.handleShowModalChange(undefined),\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            src: closeIcon,\n            alt: \"close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.firstName.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"firstName\"),\n            type: \"text\",\n            name: \"firstName\",\n            placeholder: \"Jack\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"firstName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.lastName.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"lastName\"),\n            type: \"text\",\n            name: \"lastName\",\n            placeholder: \"Anderson\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"lastName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.email.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"email\"),\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Jack.anderson@gmail.com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"email\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.password.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"password\"),\n            type: \"password\",\n            placeholder: \"********\",\n            id: \"login-password\",\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"password\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.confirmPassword.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"confirmPassword\"),\n            type: \"password\",\n            placeholder: \"********\",\n            id: \"login-confirm-password\",\n            name: \"confirmPassword\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"confirmPassword\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this);\n    } else if (showModal === undefined) {\n      component = null;\n    } else {\n      component = /*#__PURE__*/_jsxDEV(RegisterSuccessful, {\n        firstName: data.firstName.value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 19\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: component\n    }, void 0, false);\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/sophiesun/Desktop/BestTraveller/frontend-Traveller/src/components/Register/Register.jsx"],"names":["React","swal","register","validation","closeIcon","Card","Title","InputContainer","Label","Input","Button","Close","CloseIcon","Error","RegisterSuccessful","initialData","value","blurred","touched","Register","Component","constructor","props","state","showModal","isRegister","data","firstName","lastName","email","password","confirmPassword","isFormSubmit","handleShowModalChange","bind","handleDataChange","handleIsFormSubmitChange","handleBlurredChange","newShowModal","setState","newIsFormSubmit","e","name","target","setData","newData","prevState","getErrorMessage","error","Object","keys","forEach","errorOfName","signUp","inputData","then","res","catch","err","render","component","preventDefault","undefined"],"mappings":";;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SACEC,IADF,EAEEC,KAFF,EAGEC,cAHF,EAIEC,KAJF,EAKEC,KALF,EAMEC,MANF,EAOEC,KAPF,EAQEC,SARF,EASEC,KATF,QAUO,mBAVP;AAWA,OAAOC,kBAAP,MAA+B,sBAA/B;;;AAEA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,KAAK,EAAE,EADW;AAElBC,EAAAA,OAAO,EAAE,KAFS;AAGlBC,EAAAA,OAAO,EAAE;AAHS,CAApB;;AAMA,MAAMC,QAAN,SAAuBnB,KAAK,CAACoB,SAA7B,CAAuC;AACrCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE,IADA;AAEXC,MAAAA,UAAU,EAAE,KAFD;AAGXC,MAAAA,IAAI,EAAE;AACJC,QAAAA,SAAS,EAAEZ,WADP;AAEJa,QAAAA,QAAQ,EAAEb,WAFN;AAGJc,QAAAA,KAAK,EAAEd,WAHH;AAIJe,QAAAA,QAAQ,EAAEf,WAJN;AAKJgB,QAAAA,eAAe,EAAEhB;AALb,OAHK;AAUXiB,MAAAA,YAAY,EAAE;AAVH,KAAb;AAYA,SAAKC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BC,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKE,wBAAL,GAAgC,KAAKA,wBAAL,CAA8BF,IAA9B,CAAmC,IAAnC,CAAhC;AACA,SAAKG,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBH,IAAzB,CAA8B,IAA9B,CAA3B;AACD;;AAEDD,EAAAA,qBAAqB,CAACK,YAAD,EAAe;AAClC,SAAKC,QAAL,CAAc;AACZf,MAAAA,SAAS,EAAEc;AADC,KAAd;AAGD;;AAEDF,EAAAA,wBAAwB,CAACI,eAAD,EAAkB;AACxC,SAAKD,QAAL,CAAc;AACZP,MAAAA,YAAY,EAAEQ;AADF,KAAd;AAGD;;AAEDL,EAAAA,gBAAgB,CAACM,CAAD,EAAI;AAClB,UAAM;AAAEC,MAAAA,IAAF;AAAQ1B,MAAAA;AAAR,QAAkByB,CAAC,CAACE,MAA1B;AACA,SAAKC,OAAL,CAAaF,IAAb,EAAmB;AACjB1B,MAAAA,KADiB;AAEjBE,MAAAA,OAAO,EAAE;AAFQ,KAAnB;AAID;;AAEDmB,EAAAA,mBAAmB,CAACI,CAAD,EAAI;AACrB,UAAM;AAAEC,MAAAA;AAAF,QAAWD,CAAC,CAACE,MAAnB;AACA,SAAKC,OAAL,CAAaF,IAAb,EAAmB;AACjBzB,MAAAA,OAAO,EAAE;AADQ,KAAnB;AAGD;;AAED2B,EAAAA,OAAO,CAACF,IAAD,EAAOG,OAAP,EAAgB;AACrB,SAAKN,QAAL,CAAeO,SAAD,KAAgB;AAC5BpB,MAAAA,IAAI,EAAE,EACJ,GAAGoB,SAAS,CAACpB,IADT;AAEJ,SAACgB,IAAD,GAAQ,EACN,GAAGI,SAAS,CAACpB,IAAV,CAAegB,IAAf,CADG;AAEN,aAAGG;AAFG;AAFJ;AADsB,KAAhB,CAAd;AASD;;AAEDE,EAAAA,eAAe,CAACC,KAAD,EAAQN,IAAR,EAAc;AAC3B,UAAM;AAAEhB,MAAAA,IAAF;AAAQM,MAAAA;AAAR,QAAyB,KAAKT,KAApC;AACA,WAAO,CAACG,IAAI,CAACgB,IAAD,CAAJ,CAAWzB,OAAX,IAAsBe,YAAvB,KAAwCgB,KAAK,CAACN,IAAD,CAApD;AACD,GA/DoC,CAgErC;;;AAEAvC,EAAAA,UAAU,GAAG;AACX,UAAM;AAAEuB,MAAAA;AAAF,QAAW,KAAKH,KAAtB;AACA,UAAMyB,KAAK,GAAG,EAAd;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYxB,IAAZ,EAAkByB,OAAlB,CAA2BT,IAAD,IAAU;AAClC,YAAMU,WAAW,GAAGjD,UAAU,CAACuC,IAAD,EAAOhB,IAAP,CAA9B;;AACA,UAAI,CAAC0B,WAAL,EAAkB;AAChB;AACD;;AACDJ,MAAAA,KAAK,CAACN,IAAD,CAAL,GAAcU,WAAd;AACD,KAND;AAOA,WAAOJ,KAAP;AACD;;AAEDK,EAAAA,MAAM,CAACC,SAAD,EAAY;AAChBpD,IAAAA,QAAQ,CAACoD,SAAD,CAAR,CACGC,IADH,CACSC,GAAD,IAAS;AACb,WAAKjB,QAAL,CAAc;AACZd,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KALH,EAMGgC,KANH,CAMUC,GAAD,IAAS;AACdzD,MAAAA,IAAI,CAAC,MAAD,EAAS,qCAAT,EAAgD,OAAhD,CAAJ;AACD,KARH;AASD;;AAED0D,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEnC,MAAAA,SAAF;AAAaE,MAAAA,IAAb;AAAmBD,MAAAA;AAAnB,QAAkC,KAAKF,KAA7C;AACA,UAAMyB,KAAK,GAAG,KAAK7C,UAAL,CAAgBuB,IAAhB,CAAd;AACA,QAAIkC,SAAJ;;AAEA,QAAIpC,SAAS,KAAK,IAAd,IAAsBC,UAAU,KAAK,KAAzC,EAAgD;AAC9CmC,MAAAA,SAAS,gBACP,QAAC,IAAD;AACE,QAAA,QAAQ,EAAGnB,CAAD,IAAO;AACfA,UAAAA,CAAC,CAACoB,cAAF;AACA,eAAKzB,wBAAL,CAA8B,IAA9B;AACA,eAAKiB,MAAL,CAAY3B,IAAZ;AACD,SALH;AAAA,gCAOE,QAAC,KAAD;AAAO,UAAA,OAAO,EAAE,MAAM,KAAKO,qBAAL,CAA2B6B,SAA3B,CAAtB;AAAA,iCACE,QAAC,SAAD;AAAW,YAAA,GAAG,EAAE1D,SAAhB;AAA2B,YAAA,GAAG,EAAC;AAA/B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAPF,eAUE,QAAC,cAAD;AAAA,kCACE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE,QAAC,KAAD;AACE,YAAA,KAAK,EAAEsB,IAAI,CAACC,SAAL,CAAeX,KADxB;AAEE,YAAA,QAAQ,EAAE,KAAKmB,gBAFjB;AAGE,YAAA,MAAM,EAAE,KAAKE,mBAHf;AAIE,YAAA,KAAK,EAAE,KAAKU,eAAL,CAAqBC,KAArB,EAA4B,WAA5B,CAJT;AAKE,YAAA,IAAI,EAAC,MALP;AAME,YAAA,IAAI,EAAC,WANP;AAOE,YAAA,WAAW,EAAC;AAPd;AAAA;AAAA;AAAA;AAAA,kBAHF,eAYE,QAAC,KAAD;AAAA,sBAAQ,KAAKD,eAAL,CAAqBC,KAArB,EAA4B,WAA5B;AAAR;AAAA;AAAA;AAAA;AAAA,kBAZF,eAaE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF,eAcE,QAAC,KAAD;AACE,YAAA,KAAK,EAAEtB,IAAI,CAACE,QAAL,CAAcZ,KADvB;AAEE,YAAA,QAAQ,EAAE,KAAKmB,gBAFjB;AAGE,YAAA,MAAM,EAAE,KAAKE,mBAHf;AAIE,YAAA,KAAK,EAAE,KAAKU,eAAL,CAAqBC,KAArB,EAA4B,UAA5B,CAJT;AAKE,YAAA,IAAI,EAAC,MALP;AAME,YAAA,IAAI,EAAC,UANP;AAOE,YAAA,WAAW,EAAC;AAPd;AAAA;AAAA;AAAA;AAAA,kBAdF,eAuBE,QAAC,KAAD;AAAA,sBAAQ,KAAKD,eAAL,CAAqBC,KAArB,EAA4B,UAA5B;AAAR;AAAA;AAAA;AAAA;AAAA,kBAvBF,eAwBE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxBF,eAyBE,QAAC,KAAD;AACE,YAAA,KAAK,EAAEtB,IAAI,CAACG,KAAL,CAAWb,KADpB;AAEE,YAAA,QAAQ,EAAE,KAAKmB,gBAFjB;AAGE,YAAA,MAAM,EAAE,KAAKE,mBAHf;AAIE,YAAA,KAAK,EAAE,KAAKU,eAAL,CAAqBC,KAArB,EAA4B,OAA5B,CAJT;AAKE,YAAA,IAAI,EAAC,OALP;AAME,YAAA,IAAI,EAAC,OANP;AAOE,YAAA,WAAW,EAAC;AAPd;AAAA;AAAA;AAAA;AAAA,kBAzBF,eAkCE,QAAC,KAAD;AAAA,sBAAQ,KAAKD,eAAL,CAAqBC,KAArB,EAA4B,OAA5B;AAAR;AAAA;AAAA;AAAA;AAAA,kBAlCF,eAmCE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnCF,eAoCE,QAAC,KAAD;AACE,YAAA,KAAK,EAAEtB,IAAI,CAACI,QAAL,CAAcd,KADvB;AAEE,YAAA,QAAQ,EAAE,KAAKmB,gBAFjB;AAGE,YAAA,MAAM,EAAE,KAAKE,mBAHf;AAIE,YAAA,KAAK,EAAE,KAAKU,eAAL,CAAqBC,KAArB,EAA4B,UAA5B,CAJT;AAKE,YAAA,IAAI,EAAC,UALP;AAME,YAAA,WAAW,EAAC,UANd;AAOE,YAAA,EAAE,EAAC,gBAPL;AAQE,YAAA,IAAI,EAAC;AARP;AAAA;AAAA;AAAA;AAAA,kBApCF,eA8CE,QAAC,KAAD;AAAA,sBAAQ,KAAKD,eAAL,CAAqBC,KAArB,EAA4B,UAA5B;AAAR;AAAA;AAAA;AAAA;AAAA,kBA9CF,eA+CE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA/CF,eAgDE,QAAC,KAAD;AACE,YAAA,KAAK,EAAEtB,IAAI,CAACK,eAAL,CAAqBf,KAD9B;AAEE,YAAA,QAAQ,EAAE,KAAKmB,gBAFjB;AAGE,YAAA,MAAM,EAAE,KAAKE,mBAHf;AAIE,YAAA,KAAK,EAAE,KAAKU,eAAL,CAAqBC,KAArB,EAA4B,iBAA5B,CAJT;AAKE,YAAA,IAAI,EAAC,UALP;AAME,YAAA,WAAW,EAAC,UANd;AAOE,YAAA,EAAE,EAAC,wBAPL;AAQE,YAAA,IAAI,EAAC;AARP;AAAA;AAAA;AAAA;AAAA,kBAhDF,eA0DE,QAAC,KAAD;AAAA,sBAAQ,KAAKD,eAAL,CAAqBC,KAArB,EAA4B,iBAA5B;AAAR;AAAA;AAAA;AAAA;AAAA,kBA1DF,eA2DE,QAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA3DF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AA0ED,KA3ED,MA2EO,IAAIxB,SAAS,KAAKsC,SAAlB,EAA6B;AAClCF,MAAAA,SAAS,GAAG,IAAZ;AACD,KAFM,MAEA;AACLA,MAAAA,SAAS,gBAAG,QAAC,kBAAD;AAAoB,QAAA,SAAS,EAAElC,IAAI,CAACC,SAAL,CAAeX;AAA9C;AAAA;AAAA;AAAA;AAAA,cAAZ;AACD;;AAED,wBAAO;AAAA,gBAAG4C;AAAH,qBAAP;AACD;;AAlLoC;;AAqLvC,eAAezC,QAAf","sourcesContent":["/* eslint-disable node/no-unsupported-features/es-syntax */\nimport React from \"react\"\nimport swal from \"sweetalert\"\nimport { register } from \"../../api/api\"\nimport validation from \"./Validation\"\nimport closeIcon from \"./img/cancel.png\"\nimport {\n  Card,\n  Title,\n  InputContainer,\n  Label,\n  Input,\n  Button,\n  Close,\n  CloseIcon,\n  Error,\n} from \"./styles/register\"\nimport RegisterSuccessful from \"./RegisterSuccessful\"\n\nconst initialData = {\n  value: \"\",\n  blurred: false,\n  touched: false,\n}\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showModal: true,\n      isRegister: false,\n      data: {\n        firstName: initialData,\n        lastName: initialData,\n        email: initialData,\n        password: initialData,\n        confirmPassword: initialData,\n      },\n      isFormSubmit: false,\n    }\n    this.handleShowModalChange = this.handleShowModalChange.bind(this)\n    this.handleDataChange = this.handleDataChange.bind(this)\n    this.handleIsFormSubmitChange = this.handleIsFormSubmitChange.bind(this)\n    this.handleBlurredChange = this.handleBlurredChange.bind(this)\n  }\n\n  handleShowModalChange(newShowModal) {\n    this.setState({\n      showModal: newShowModal,\n    })\n  }\n\n  handleIsFormSubmitChange(newIsFormSubmit) {\n    this.setState({\n      isFormSubmit: newIsFormSubmit,\n    })\n  }\n\n  handleDataChange(e) {\n    const { name, value } = e.target\n    this.setData(name, {\n      value,\n      touched: true,\n    })\n  }\n\n  handleBlurredChange(e) {\n    const { name } = e.target\n    this.setData(name, {\n      blurred: true,\n    })\n  }\n\n  setData(name, newData) {\n    this.setState((prevState) => ({\n      data: {\n        ...prevState.data,\n        [name]: {\n          ...prevState.data[name],\n          ...newData,\n        },\n      },\n    }))\n  }\n\n  getErrorMessage(error, name) {\n    const { data, isFormSubmit } = this.state\n    return (data[name].blurred || isFormSubmit) && error[name]\n  }\n  // Derived state\n\n  validation() {\n    const { data } = this.state\n    const error = {}\n    Object.keys(data).forEach((name) => {\n      const errorOfName = validation(name, data)\n      if (!errorOfName) {\n        return\n      }\n      error[name] = errorOfName\n    })\n    return error\n  }\n\n  signUp(inputData) {\n    register(inputData)\n      .then((res) => {\n        this.setState({\n          isRegister: true,\n        })\n      })\n      .catch((err) => {\n        swal(\"Oops\", \"This email address is already exist\", \"error\")\n      })\n  }\n\n  render() {\n    const { showModal, data, isRegister } = this.state\n    const error = this.validation(data)\n    let component\n\n    if (showModal === true && isRegister === false) {\n      component = (\n        <Card\n          onSubmit={(e) => {\n            e.preventDefault()\n            this.handleIsFormSubmitChange(true)\n            this.signUp(data)\n          }}\n        >\n          <Close onClick={() => this.handleShowModalChange(undefined)}>\n            <CloseIcon src={closeIcon} alt=\"close\" />\n          </Close>\n          <InputContainer>\n            <Title>Register</Title>\n            <Label>First Name</Label>\n            <Input\n              value={data.firstName.value}\n              onChange={this.handleDataChange}\n              onBlur={this.handleBlurredChange}\n              error={this.getErrorMessage(error, \"firstName\")}\n              type=\"text\"\n              name=\"firstName\"\n              placeholder=\"Jack\"\n            />\n            <Error>{this.getErrorMessage(error, \"firstName\")}</Error>\n            <Label>Last Name</Label>\n            <Input\n              value={data.lastName.value}\n              onChange={this.handleDataChange}\n              onBlur={this.handleBlurredChange}\n              error={this.getErrorMessage(error, \"lastName\")}\n              type=\"text\"\n              name=\"lastName\"\n              placeholder=\"Anderson\"\n            />\n            <Error>{this.getErrorMessage(error, \"lastName\")}</Error>\n            <Label>Email</Label>\n            <Input\n              value={data.email.value}\n              onChange={this.handleDataChange}\n              onBlur={this.handleBlurredChange}\n              error={this.getErrorMessage(error, \"email\")}\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Jack.anderson@gmail.com\"\n            />\n            <Error>{this.getErrorMessage(error, \"email\")}</Error>\n            <Label>Password</Label>\n            <Input\n              value={data.password.value}\n              onChange={this.handleDataChange}\n              onBlur={this.handleBlurredChange}\n              error={this.getErrorMessage(error, \"password\")}\n              type=\"password\"\n              placeholder=\"********\"\n              id=\"login-password\"\n              name=\"password\"\n            />\n            <Error>{this.getErrorMessage(error, \"password\")}</Error>\n            <Label>Confirm Password</Label>\n            <Input\n              value={data.confirmPassword.value}\n              onChange={this.handleDataChange}\n              onBlur={this.handleBlurredChange}\n              error={this.getErrorMessage(error, \"confirmPassword\")}\n              type=\"password\"\n              placeholder=\"********\"\n              id=\"login-confirm-password\"\n              name=\"confirmPassword\"\n            />\n            <Error>{this.getErrorMessage(error, \"confirmPassword\")}</Error>\n            <Button type=\"submit\">Register</Button>\n          </InputContainer>\n        </Card>\n      )\n    } else if (showModal === undefined) {\n      component = null\n    } else {\n      component = <RegisterSuccessful firstName={data.firstName.value} />\n    }\n\n    return <>{component}</>\n  }\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}