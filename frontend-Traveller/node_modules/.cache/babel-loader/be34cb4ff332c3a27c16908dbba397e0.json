{"ast":null,"code":"var _jsxFileName = \"/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/pages/Detail/BookNow/BookNow.jsx\";\n\n/* eslint-disable react/destructuring-assignment */\n\n/* eslint-disable react/prop-types */\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Wrapper, Title, Content, Button } from \"./styles/style\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(\"pk_test_51JH5JMKu7kyZrQEG6Lo8u0p4bMPRIYLR2nwyj3JmeUFMKUjZU0Hax085w4Z4VfX0uFfKI4UQthFV2NPDr842JTrL00XBO0dRBQ\");\n\nclass BookNow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  async bookTour(userId, tourId) {\n    // get checkout session from API\n    const session = await axios({\n      method: \"GET\",\n      url: `http://127.0.0.1:3000/api/v1/bookings/checkout-session/${userId}/${tourId}`,\n      withCredentials: true\n    });\n    console.log(session); // create checkout from charge credit card\n\n    const stripe = await stripePromise;\n    setTimeout(async () => {\n      await stripe.redirectToCheckout({\n        sessionId: session.data.session.id\n      });\n    }, 1000);\n  }\n\n  render() {\n    const {\n      userEmail,\n      tour\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Wrapper, {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: \"What are you waiting for?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Content, {\n          children: \"What a wonderful trip! Make it yours today!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), this.props.isLoggedIn ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => this.bookTour(userEmail, tour._id),\n          children: \"Book Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          children: \"Log in to book tour\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  isLoggedIn: state.header.isLoggedIn,\n  userEmail: state.header.userEmail,\n  tour: state.tour.tour\n});\n\nexport default connect(mapStateToProps, null)(BookNow);","map":{"version":3,"sources":["/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/pages/Detail/BookNow/BookNow.jsx"],"names":["React","Component","axios","connect","loadStripe","Wrapper","Title","Content","Button","stripePromise","BookNow","constructor","props","state","bookTour","userId","tourId","session","method","url","withCredentials","console","log","stripe","setTimeout","redirectToCheckout","sessionId","data","id","render","userEmail","tour","isLoggedIn","_id","mapStateToProps","header"],"mappings":";;AAAA;;AACA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,OAAT,EAAkBC,KAAlB,EAAyBC,OAAzB,EAAkCC,MAAlC,QAAgD,gBAAhD;;;AAEA,MAAMC,aAAa,GAAGL,UAAU,CAC9B,6GAD8B,CAAhC;;AAGA,MAAMM,OAAN,SAAsBT,SAAtB,CAAgC;AAC9BU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa,EAAb;AACD;;AAEa,QAARC,QAAQ,CAACC,MAAD,EAASC,MAAT,EAAiB;AAC7B;AACA,UAAMC,OAAO,GAAG,MAAMf,KAAK,CAAC;AAC1BgB,MAAAA,MAAM,EAAE,KADkB;AAE1BC,MAAAA,GAAG,EAAG,0DAAyDJ,MAAO,IAAGC,MAAO,EAFtD;AAG1BI,MAAAA,eAAe,EAAE;AAHS,KAAD,CAA3B;AAKAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ,EAP6B,CAQ7B;;AACA,UAAMM,MAAM,GAAG,MAAMd,aAArB;AACAe,IAAAA,UAAU,CAAC,YAAY;AACrB,YAAMD,MAAM,CAACE,kBAAP,CAA0B;AAC9BC,QAAAA,SAAS,EAAET,OAAO,CAACU,IAAR,CAAaV,OAAb,CAAqBW;AADF,OAA1B,CAAN;AAGD,KAJS,EAIP,IAJO,CAAV;AAKD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAAsB,KAAKnB,KAAjC;AACA,wBACE;AAAA,6BACE,QAAC,OAAD;AAAA,gCACE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGG,KAAKA,KAAL,CAAWoB,UAAX,gBACC,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,MAAM,KAAKlB,QAAL,CAAcgB,SAAd,EAAyBC,IAAI,CAACE,GAA9B,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,gBAKC,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,qBADF;AAeD;;AAxC6B;;AA2ChC,MAAMC,eAAe,GAAIrB,KAAD,KAAY;AAClCmB,EAAAA,UAAU,EAAEnB,KAAK,CAACsB,MAAN,CAAaH,UADS;AAElCF,EAAAA,SAAS,EAAEjB,KAAK,CAACsB,MAAN,CAAaL,SAFU;AAGlCC,EAAAA,IAAI,EAAElB,KAAK,CAACkB,IAAN,CAAWA;AAHiB,CAAZ,CAAxB;;AAMA,eAAe5B,OAAO,CAAC+B,eAAD,EAAkB,IAAlB,CAAP,CAA+BxB,OAA/B,CAAf","sourcesContent":["/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\nimport React, { Component } from \"react\"\nimport axios from \"axios\"\nimport { connect } from \"react-redux\"\nimport { loadStripe } from \"@stripe/stripe-js\"\nimport { Wrapper, Title, Content, Button } from \"./styles/style\"\n\nconst stripePromise = loadStripe(\n  \"pk_test_51JH5JMKu7kyZrQEG6Lo8u0p4bMPRIYLR2nwyj3JmeUFMKUjZU0Hax085w4Z4VfX0uFfKI4UQthFV2NPDr842JTrL00XBO0dRBQ\"\n)\nclass BookNow extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async bookTour(userId, tourId) {\n    // get checkout session from API\n    const session = await axios({\n      method: \"GET\",\n      url: `http://127.0.0.1:3000/api/v1/bookings/checkout-session/${userId}/${tourId}`,\n      withCredentials: true,\n    })\n    console.log(session)\n    // create checkout from charge credit card\n    const stripe = await stripePromise\n    setTimeout(async () => {\n      await stripe.redirectToCheckout({\n        sessionId: session.data.session.id,\n      })\n    }, 1000)\n  }\n\n  render() {\n    const { userEmail, tour } = this.props\n    return (\n      <>\n        <Wrapper>\n          <Title>What are you waiting for?</Title>\n          <Content>What a wonderful trip! Make it yours today!</Content>\n          {this.props.isLoggedIn ? (\n            <Button onClick={() => this.bookTour(userEmail, tour._id)}>\n              Book Now\n            </Button>\n          ) : (\n            <Button>Log in to book tour</Button>\n          )}\n        </Wrapper>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  isLoggedIn: state.header.isLoggedIn,\n  userEmail: state.header.userEmail,\n  tour: state.tour.tour,\n})\n\nexport default connect(mapStateToProps, null)(BookNow)\n"]},"metadata":{},"sourceType":"module"}