{"ast":null,"code":"var _jsxFileName = \"/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/components/Register/Register.jsx\";\n\n/* eslint-disable no-undef */\n\n/* eslint-disable no-alert */\n\n/* eslint-disable node/no-unsupported-features/es-syntax */\nimport React from \"react\";\nimport axios from \"axios\";\nimport closeIcon from \"./img/cancel.png\";\nimport validate from \"./validate\";\nimport { Box, Card, Title, InputContainer, Label, Input, Button, Text, BlueText, Close, CloseIcon, Error } from \"../Yang/styles/register\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialData = {\n  value: \"\",\n  blurred: false,\n  touched: false\n};\n\nconst signUp = async inputData => {\n  //console.log(\"Data before post: \", inputData.firstName.value)\n  await axios({\n    method: \"POST\",\n    url: \"http://localhost:8000/api/v1/users\",\n    data: {\n      firstName: inputData.firstName.value,\n      lastName: inputData.lastName.value,\n      email: inputData.email.value,\n      password: inputData.password.value,\n      role: \"user\",\n      dateOfBirth: \"29/09/1999\"\n    }\n  }).then(res => {\n    alert(\"Successfully Registered\");\n    console.log(res);\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: true,\n      data: {\n        firstName: initialData,\n        lastName: initialData,\n        email: initialData,\n        password: initialData,\n        confirmPassword: initialData\n      },\n      isFormSubmit: false\n    };\n    this.handleShowModalChange = this.handleShowModalChange.bind(this);\n    this.handleDataChange = this.handleDataChange.bind(this);\n    this.handleIsFormSubmitChange = this.handleIsFormSubmitChange.bind(this);\n    this.handleBlurredChange = this.handleBlurredChange.bind(this);\n  }\n\n  handleShowModalChange(newShowModal) {\n    this.setState({\n      showModal: newShowModal\n    });\n  }\n\n  handleIsFormSubmitChange(newIsFormSubmit) {\n    this.setState({\n      isFormSubmit: newIsFormSubmit\n    });\n  }\n\n  handleDataChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setData(name, {\n      value,\n      touched: true\n    });\n  }\n\n  handleBlurredChange(e) {\n    const {\n      name\n    } = e.target;\n    this.setData(name, {\n      blurred: true\n    });\n  }\n\n  setData(name, newData) {\n    this.setState(prevState => ({\n      data: { ...prevState.data,\n        [name]: { ...prevState.data[name],\n          ...newData\n        }\n      }\n    }));\n  }\n\n  getErrorMessage(error, name) {\n    const {\n      data,\n      isFormSubmit\n    } = this.state;\n    return (data[name].blurred || isFormSubmit) && error[name];\n  } // Derived state\n\n\n  validate() {\n    const {\n      data\n    } = this.state;\n    const error = {};\n    Object.keys(data).forEach(name => {\n      const errorOfName = validate(name, data);\n\n      if (!errorOfName) {\n        return;\n      }\n\n      error[name] = errorOfName;\n    });\n    return error;\n  }\n\n  render() {\n    const {\n      showModal,\n      data\n    } = this.state;\n    const error = this.validate(data); // 衍生状态\n\n    const hasError = Object.keys(error).length > 0;\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: showModal === true && /*#__PURE__*/_jsxDEV(Card, {\n        onSubmit: e => {\n          e.preventDefault();\n          this.handleIsFormSubmitChange(true);\n\n          if (hasError) {\n            console.log(\"FORM HAS ERROR\");\n          }\n\n          console.log(\"state\", this.state);\n          signUp(data);\n        },\n        children: [/*#__PURE__*/_jsxDEV(Close // href=\"/\"\n        , {\n          onClick: () => this.handleShowModalChange(undefined),\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            src: closeIcon,\n            alt: \"close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.firstName.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"firstName\"),\n            type: \"text\",\n            name: \"firstName\",\n            placeholder: \"Jack\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"firstName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.lastName.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"lastName\"),\n            type: \"text\",\n            name: \"lastName\",\n            placeholder: \"Anderson\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"lastName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.email.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"email\"),\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Jack.anderson@gmail.com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"email\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.password.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"password\"),\n            type: \"password\",\n            placeholder: \"********\",\n            id: \"login-password\",\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"password\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.confirmPassword.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"confirmPassword\"),\n            type: \"password\",\n            placeholder: \"********\",\n            id: \"login-confirm-password\",\n            name: \"confirmPassword\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"confirmPassword\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            value: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(BlueText, {\n              children: \"Sign in >>\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/components/Register/Register.jsx"],"names":["React","axios","closeIcon","validate","Box","Card","Title","InputContainer","Label","Input","Button","Text","BlueText","Close","CloseIcon","Error","initialData","value","blurred","touched","signUp","inputData","method","url","data","firstName","lastName","email","password","role","dateOfBirth","then","res","alert","console","log","catch","err","Register","Component","constructor","props","state","showModal","confirmPassword","isFormSubmit","handleShowModalChange","bind","handleDataChange","handleIsFormSubmitChange","handleBlurredChange","newShowModal","setState","newIsFormSubmit","e","name","target","setData","newData","prevState","getErrorMessage","error","Object","keys","forEach","errorOfName","render","hasError","length","preventDefault","undefined"],"mappings":"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","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-alert */\n/* eslint-disable node/no-unsupported-features/es-syntax */\nimport React from \"react\"\nimport axios from \"axios\"\nimport closeIcon from \"./img/cancel.png\"\nimport validate from \"./validate\"\nimport {\n  Box,\n  Card,\n  Title,\n  InputContainer,\n  Label,\n  Input,\n  Button,\n  Text,\n  BlueText,\n  Close,\n  CloseIcon,\n  Error,\n} from \"../Yang/styles/register\"\n\nconst initialData = {\n  value: \"\",\n  blurred: false,\n  touched: false,\n}\n\nconst signUp = async (inputData) => {\n  //console.log(\"Data before post: \", inputData.firstName.value)\n  await axios({\n    method: \"POST\",\n    url: \"http://localhost:8000/api/v1/users\",\n    data: {\n      firstName: inputData.firstName.value,\n      lastName: inputData.lastName.value,\n      email: inputData.email.value,\n      password: inputData.password.value,\n      role: \"user\",\n      dateOfBirth: \"29/09/1999\",\n    },\n  })\n    .then((res) => {\n      alert(\"Successfully Registered\")\n      console.log(res)\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n}\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showModal: true,\n      data: {\n        firstName: initialData,\n        lastName: initialData,\n        email: initialData,\n        password: initialData,\n        confirmPassword: initialData,\n      },\n      isFormSubmit: false,\n    }\n    this.handleShowModalChange = this.handleShowModalChange.bind(this)\n    this.handleDataChange = this.handleDataChange.bind(this)\n    this.handleIsFormSubmitChange = this.handleIsFormSubmitChange.bind(this)\n    this.handleBlurredChange = this.handleBlurredChange.bind(this)\n  }\n\n  handleShowModalChange(newShowModal) {\n    this.setState({\n      showModal: newShowModal,\n    })\n  }\n\n  handleIsFormSubmitChange(newIsFormSubmit) {\n    this.setState({\n      isFormSubmit: newIsFormSubmit,\n    })\n  }\n\n  handleDataChange(e) {\n    const { name, value } = e.target\n    this.setData(name, {\n      value,\n      touched: true,\n    })\n  }\n\n  handleBlurredChange(e) {\n    const { name } = e.target\n    this.setData(name, {\n      blurred: true,\n    })\n  }\n\n  setData(name, newData) {\n    this.setState((prevState) => ({\n      data: {\n        ...prevState.data,\n        [name]: {\n          ...prevState.data[name],\n          ...newData,\n        },\n      },\n    }))\n  }\n\n  getErrorMessage(error, name) {\n    const { data, isFormSubmit } = this.state\n    return (data[name].blurred || isFormSubmit) && error[name]\n  }\n  // Derived state\n\n  validate() {\n    const { data } = this.state\n    const error = {}\n    Object.keys(data).forEach((name) => {\n      const errorOfName = validate(name, data)\n      if (!errorOfName) {\n        return\n      }\n      error[name] = errorOfName\n    })\n    return error\n  }\n\n  render() {\n    const { showModal, data } = this.state\n    const error = this.validate(data)\n\n    // 衍生状态\n    const hasError = Object.keys(error).length > 0\n    return (\n      <Box>\n        {showModal === true && (\n          <Card\n            onSubmit={(e) => {\n              e.preventDefault()\n              this.handleIsFormSubmitChange(true)\n              if (hasError) {\n                console.log(\"FORM HAS ERROR\")\n              }\n              console.log(\"state\", this.state)\n              signUp(data)\n            }}\n          >\n            <Close\n              // href=\"/\"\n              onClick={() => this.handleShowModalChange(undefined)}\n            >\n              <CloseIcon src={closeIcon} alt=\"close\" />\n            </Close>\n            <InputContainer>\n              <Title>Register</Title>\n              <Label>First Name</Label>\n              <Input\n                value={data.firstName.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"firstName\")}\n                type=\"text\"\n                name=\"firstName\"\n                placeholder=\"Jack\"\n              />\n              <Error>{this.getErrorMessage(error, \"firstName\")}</Error>\n              <Label>Last Name</Label>\n              <Input\n                value={data.lastName.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"lastName\")}\n                type=\"text\"\n                name=\"lastName\"\n                placeholder=\"Anderson\"\n              />\n              <Error>{this.getErrorMessage(error, \"lastName\")}</Error>\n              <Label>Email</Label>\n              <Input\n                value={data.email.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"email\")}\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Jack.anderson@gmail.com\"\n              />\n              <Error>{this.getErrorMessage(error, \"email\")}</Error>\n              <Label>Password</Label>\n              <Input\n                value={data.password.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"password\")}\n                type=\"password\"\n                placeholder=\"********\"\n                id=\"login-password\"\n                name=\"password\"\n              />\n              <Error>{this.getErrorMessage(error, \"password\")}</Error>\n              <Label>Confirm Password</Label>\n              <Input\n                value={data.confirmPassword.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"confirmPassword\")}\n                type=\"password\"\n                placeholder=\"********\"\n                id=\"login-confirm-password\"\n                name=\"confirmPassword\"\n              />\n              <Error>{this.getErrorMessage(error, \"confirmPassword\")}</Error>\n              <Button type=\"submit\" value=\"Continue\" />\n              <Text>\n                Already have an account?<BlueText>Sign in &gt;&gt;</BlueText>\n              </Text>\n            </InputContainer>\n          </Card>\n        )}\n      </Box>\n    )\n  }\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}