{"ast":null,"code":"import axios from \"axios\";\nimport swal from \"sweetalert\";\nimport * as actionTypes from \"./actionTypes\";\n\nconst userLogin = (userEmail, userFirstName, userLastName, userPassword, userImage) => ({\n  type: actionTypes.USER_LOGIN,\n  userEmail,\n  userFirstName,\n  userLastName,\n  userPassword,\n  userImage\n});\n\nconst userLogout = () => ({\n  type: actionTypes.USER_LOGOUT\n});\n\nconst updateUserInfo = (userFirstName, userLastName, userEmail, userImage, isLoggedIn) => ({\n  type: actionTypes.UPDATE_USER_INFO,\n  userFirstName,\n  userLastName,\n  userEmail,\n  userImage,\n  isLoggedIn\n});\n\nconst updateUserPassword = (currentPassword, newPassword, confirmedPassword, userEmail) => ({\n  type: actionTypes.UPDATE_USER_PASS,\n  currentPassword,\n  newPassword,\n  confirmedPassword,\n  userEmail\n});\n\nexport const login = values => dispatch => {\n  axios({\n    method: \"POST\",\n    url: \"http://127.0.0.1:8000/api/v1/auth/login\",\n    data: {\n      email: values.email,\n      password: values.password\n    },\n    withCredentials: true\n  }).then(res => {\n    const userEmail = res.data.user.email;\n    const userPassword = res.data.user.password;\n    const userFirstName = res.data.user.firstName;\n    const userLastName = res.data.user.lastName;\n    const userImage = res.data.user.image;\n    const action = userLogin(userEmail, userFirstName, userLastName, userPassword, userImage);\n    dispatch(action);\n    swal(\"Welcome!\", \"You have successfully logged in!\", \"success\"); // window.location = \"/\"\n  }).catch(err => {\n    swal(\"Oops!\", \"Something went wrong!\", \"error\");\n    console.log(err);\n  });\n};\nexport const logout = () => dispatch => {\n  const action = userLogout();\n  dispatch(action);\n  swal(\"Goodbye!\", \"Successfully logged out\", \"success\");\n};\nexport const updateUser = (e, userFirstName, userLastName, userEmail, userImage, isLoggedIn) => {\n  e.preventDefault();\n  return dispatch => {\n    axios({\n      method: \"PATCH\",\n      url: \"http://127.0.0.1:8000/api/v1/users/updateMe\",\n      data: {\n        firstName: userFirstName,\n        lastName: userLastName,\n        email: userEmail,\n        image: userImage\n      },\n      withCredentials: true\n    }).then(res => {\n      console.log(res);\n      const action = updateUserInfo(userFirstName, userLastName, userEmail, userImage, isLoggedIn);\n      dispatch(action);\n      swal(\"Updated!\", \"You have successfully updated profile!\", \"success\");\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const updatePassword = (e, currentPassword, newPassword, confirmedPassword, userEmail) => {\n  e.preventDefault();\n  return dispatch => {\n    axios({\n      method: \"PATCH\",\n      url: \"http://127.0.0.1:3000/api/v1/auth/updatePassword\",\n      data: {\n        currentPassword: currentPassword,\n        newPassword: newPassword,\n        confirmedPassword: confirmedPassword,\n        email: userEmail\n      },\n      withCredentials: true\n    }).then(res => {\n      swal(\"Updated!\", \"You have successfully updated password!\", \"success\");\n      const action = updateUserPassword(currentPassword, newPassword, confirmedPassword, userEmail);\n      dispatch(action);\n    }).catch(err => {\n      swal(\"Wrong!\", \"Something went wrong\", \"error\");\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/components/Header/store/actionCreators.js"],"names":["axios","swal","actionTypes","userLogin","userEmail","userFirstName","userLastName","userPassword","userImage","type","USER_LOGIN","userLogout","USER_LOGOUT","updateUserInfo","isLoggedIn","UPDATE_USER_INFO","updateUserPassword","currentPassword","newPassword","confirmedPassword","UPDATE_USER_PASS","login","values","dispatch","method","url","data","email","password","withCredentials","then","res","user","firstName","lastName","image","action","catch","err","console","log","logout","updateUser","e","preventDefault","updatePassword"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport swal from \"sweetalert\"\nimport * as actionTypes from \"./actionTypes\"\n\nconst userLogin = (\n  userEmail,\n  userFirstName,\n  userLastName,\n  userPassword,\n  userImage\n) => ({\n  type: actionTypes.USER_LOGIN,\n  userEmail,\n  userFirstName,\n  userLastName,\n  userPassword,\n  userImage,\n})\n\nconst userLogout = () => ({\n  type: actionTypes.USER_LOGOUT,\n})\n\nconst updateUserInfo = (\n  userFirstName,\n  userLastName,\n  userEmail,\n  userImage,\n  isLoggedIn\n) => ({\n  type: actionTypes.UPDATE_USER_INFO,\n  userFirstName,\n  userLastName,\n  userEmail,\n  userImage,\n  isLoggedIn,\n})\n\nconst updateUserPassword = (\n  currentPassword,\n  newPassword,\n  confirmedPassword,\n  userEmail\n) => ({\n  type: actionTypes.UPDATE_USER_PASS,\n  currentPassword,\n  newPassword,\n  confirmedPassword,\n  userEmail,\n})\n\nexport const login = (values) => (dispatch) => {\n  axios({\n    method: \"POST\",\n    url: \"http://127.0.0.1:8000/api/v1/auth/login\",\n    data: {\n      email: values.email,\n      password: values.password,\n    },\n    withCredentials: true,\n  })\n    .then((res) => {\n      const userEmail = res.data.user.email\n      const userPassword = res.data.user.password\n      const userFirstName = res.data.user.firstName\n      const userLastName = res.data.user.lastName\n      const userImage = res.data.user.image\n      const action = userLogin(\n        userEmail,\n        userFirstName,\n        userLastName,\n        userPassword,\n        userImage\n      )\n      dispatch(action)\n      swal(\"Welcome!\", \"You have successfully logged in!\", \"success\")\n      // window.location = \"/\"\n    })\n    .catch((err) => {\n      swal(\"Oops!\", \"Something went wrong!\", \"error\")\n      console.log(err)\n    })\n}\n\nexport const logout = () => (dispatch) => {\n  const action = userLogout()\n  dispatch(action)\n  swal(\"Goodbye!\", \"Successfully logged out\", \"success\")\n}\n\nexport const updateUser = (\n  e,\n  userFirstName,\n  userLastName,\n  userEmail,\n  userImage,\n  isLoggedIn\n) => {\n  e.preventDefault()\n  return (dispatch) => {\n    axios({\n      method: \"PATCH\",\n      url: \"http://127.0.0.1:8000/api/v1/users/updateMe\",\n      data: {\n        firstName: userFirstName,\n        lastName: userLastName,\n        email: userEmail,\n        image: userImage,\n      },\n      withCredentials: true,\n    })\n      .then((res) => {\n        console.log(res)\n        const action = updateUserInfo(\n          userFirstName,\n          userLastName,\n          userEmail,\n          userImage,\n          isLoggedIn\n        )\n        dispatch(action)\n        swal(\"Updated!\", \"You have successfully updated profile!\", \"success\")\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n}\n\nexport const updatePassword = (\n  e,\n  currentPassword,\n  newPassword,\n  confirmedPassword,\n  userEmail\n) => {\n  e.preventDefault()\n  return (dispatch) => {\n    axios({\n      method: \"PATCH\",\n      url: \"http://127.0.0.1:3000/api/v1/auth/updatePassword\",\n      data: {\n        currentPassword: currentPassword,\n        newPassword: newPassword,\n        confirmedPassword: confirmedPassword,\n        email: userEmail,\n      },\n      withCredentials: true,\n    })\n      .then((res) => {\n        swal(\"Updated!\", \"You have successfully updated password!\", \"success\")\n        const action = updateUserPassword(\n          currentPassword,\n          newPassword,\n          confirmedPassword,\n          userEmail\n        )\n        dispatch(action)\n      })\n      .catch((err) => {\n        swal(\"Wrong!\", \"Something went wrong\", \"error\")\n        console.log(err)\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}