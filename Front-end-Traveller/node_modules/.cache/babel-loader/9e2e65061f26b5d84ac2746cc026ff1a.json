{"ast":null,"code":"var _jsxFileName = \"/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/components/Yang/components/Register/Register.jsx\";\n\n/* eslint-disable node/no-unsupported-features/es-syntax */\nimport React from \"react\";\nimport axios from \"axios\";\nimport closeIcon from \"../../img/cancel.png\";\nimport validate from \"./validate\";\nimport { Box, Card, Title, InputContainer, Label, Input, Button, Text, BlueText, Close, CloseIcon, Error } from \"../../styles/register\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialData = {\n  value: \"\",\n  blurred: false,\n  touched: false\n};\n\nconst signUp = async inputData => {\n  try {\n    //console.log(\"Data before post: \", inputData.firstName.value)\n    const res = await axios({\n      method: \"POST\",\n      url: \"http://localhost:8000/api/v1/users\",\n      data: {\n        firstName: inputData.firstName.value,\n        lastName: inputData.lastName.value,\n        email: inputData.email.value,\n        password: inputData.password.value,\n        role: \"user\",\n        dateOfBirth: \"29/09/1999\"\n      }\n    });\n    console.log(res);\n  } catch (error) {\n    console.log(\"error\");\n  }\n};\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: true,\n      data: {\n        firstName: initialData,\n        lastName: initialData,\n        email: initialData,\n        password: initialData,\n        confirmPassword: initialData\n      },\n      isFormSubmit: false\n    };\n    this.handleShowModalChange = this.handleShowModalChange.bind(this);\n    this.handleDataChange = this.handleDataChange.bind(this);\n    this.handleIsFormSubmitChange = this.handleIsFormSubmitChange.bind(this);\n    this.handleBlurredChange = this.handleBlurredChange.bind(this);\n  }\n\n  handleShowModalChange(newShowModal) {\n    this.setState({\n      showModal: newShowModal\n    });\n  }\n\n  handleIsFormSubmitChange(newIsFormSubmit) {\n    this.setState({\n      isFormSubmit: newIsFormSubmit\n    });\n  }\n\n  handleDataChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setData(name, {\n      value,\n      touched: true\n    });\n  }\n\n  handleBlurredChange(e) {\n    const {\n      name\n    } = e.target;\n    this.setData(name, {\n      blurred: true\n    });\n  }\n\n  setData(name, newData) {\n    this.setState(prevState => ({\n      data: { ...prevState.data,\n        [name]: { ...prevState.data[name],\n          ...newData\n        }\n      }\n    }));\n  }\n\n  getErrorMessage(error, name) {\n    const {\n      data,\n      isFormSubmit\n    } = this.state;\n    return (data[name].blurred || isFormSubmit) && error[name];\n  } // Derived state\n\n\n  validate() {\n    const {\n      data\n    } = this.state;\n    const error = {};\n    Object.keys(data).forEach(name => {\n      const errorOfName = validate(name, data);\n\n      if (!errorOfName) {\n        return;\n      }\n\n      error[name] = errorOfName;\n    });\n    return error;\n  }\n\n  render() {\n    const {\n      showModal,\n      data\n    } = this.state;\n    const error = this.validate(data); // 衍生状态\n\n    const hasError = Object.keys(error).length > 0;\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: showModal === true && /*#__PURE__*/_jsxDEV(Card, {\n        onSubmit: e => {\n          e.preventDefault();\n          this.handleIsFormSubmitChange(true);\n\n          if (hasError) {\n            console.log(\"FORM HAS ERROR\");\n          }\n\n          console.log(\"state\", this.state);\n          signUp(data);\n        },\n        children: [/*#__PURE__*/_jsxDEV(Close, {\n          href: \"/\",\n          onClick: () => this.handleShowModalChange(undefined),\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            src: closeIcon,\n            alt: \"close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.firstName.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"firstName\"),\n            type: \"text\",\n            name: \"firstName\",\n            placeholder: \"Jack\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"firstName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.lastName.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"lastName\"),\n            type: \"text\",\n            name: \"lastName\",\n            placeholder: \"Anderson\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"lastName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.email.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"email\"),\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Jack.anderson@gmail.com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"email\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.password.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"password\"),\n            type: \"password\",\n            placeholder: \"********\",\n            id: \"login-password\",\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"password\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: data.confirmPassword.value,\n            onChange: this.handleDataChange,\n            onBlur: this.handleBlurredChange,\n            error: this.getErrorMessage(error, \"confirmPassword\"),\n            type: \"password\",\n            placeholder: \"********\",\n            id: \"login-confirm-password\",\n            name: \"confirmPassword\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Error, {\n            children: this.getErrorMessage(error, \"confirmPassword\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            value: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(BlueText, {\n              children: \"Sign in >>\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/components/Yang/components/Register/Register.jsx"],"names":["React","axios","closeIcon","validate","Box","Card","Title","InputContainer","Label","Input","Button","Text","BlueText","Close","CloseIcon","Error","initialData","value","blurred","touched","signUp","inputData","res","method","url","data","firstName","lastName","email","password","role","dateOfBirth","console","log","error","Register","Component","constructor","props","state","showModal","confirmPassword","isFormSubmit","handleShowModalChange","bind","handleDataChange","handleIsFormSubmitChange","handleBlurredChange","newShowModal","setState","newIsFormSubmit","e","name","target","setData","newData","prevState","getErrorMessage","Object","keys","forEach","errorOfName","render","hasError","length","preventDefault","undefined"],"mappings":"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","sourcesContent":["/* eslint-disable node/no-unsupported-features/es-syntax */\nimport React from \"react\"\nimport axios from \"axios\"\nimport closeIcon from \"../../img/cancel.png\"\nimport validate from \"./validate\"\nimport {\n  Box,\n  Card,\n  Title,\n  InputContainer,\n  Label,\n  Input,\n  Button,\n  Text,\n  BlueText,\n  Close,\n  CloseIcon,\n  Error,\n} from \"../../styles/register\"\n\nconst initialData = {\n  value: \"\",\n  blurred: false,\n  touched: false,\n}\n\nconst signUp = async (inputData) => {\n  try {\n    //console.log(\"Data before post: \", inputData.firstName.value)\n    const res = await axios({\n      method: \"POST\",\n      url: \"http://localhost:8000/api/v1/users\",\n      data: {\n        firstName: inputData.firstName.value,\n        lastName: inputData.lastName.value,\n        email: inputData.email.value,\n        password: inputData.password.value,\n        role: \"user\",\n        dateOfBirth: \"29/09/1999\",\n      },\n    })\n    console.log(res)\n  } catch (error) {\n    console.log(\"error\")\n  }\n}\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showModal: true,\n      data: {\n        firstName: initialData,\n        lastName: initialData,\n        email: initialData,\n        password: initialData,\n        confirmPassword: initialData,\n      },\n      isFormSubmit: false,\n    }\n    this.handleShowModalChange = this.handleShowModalChange.bind(this)\n    this.handleDataChange = this.handleDataChange.bind(this)\n    this.handleIsFormSubmitChange = this.handleIsFormSubmitChange.bind(this)\n    this.handleBlurredChange = this.handleBlurredChange.bind(this)\n  }\n\n  handleShowModalChange(newShowModal) {\n    this.setState({\n      showModal: newShowModal,\n    })\n  }\n\n  handleIsFormSubmitChange(newIsFormSubmit) {\n    this.setState({\n      isFormSubmit: newIsFormSubmit,\n    })\n  }\n\n  handleDataChange(e) {\n    const { name, value } = e.target\n    this.setData(name, {\n      value,\n      touched: true,\n    })\n  }\n\n  handleBlurredChange(e) {\n    const { name } = e.target\n    this.setData(name, {\n      blurred: true,\n    })\n  }\n\n  setData(name, newData) {\n    this.setState((prevState) => ({\n      data: {\n        ...prevState.data,\n        [name]: {\n          ...prevState.data[name],\n          ...newData,\n        },\n      },\n    }))\n  }\n\n  getErrorMessage(error, name) {\n    const { data, isFormSubmit } = this.state\n    return (data[name].blurred || isFormSubmit) && error[name]\n  }\n  // Derived state\n\n  validate() {\n    const { data } = this.state\n    const error = {}\n    Object.keys(data).forEach((name) => {\n      const errorOfName = validate(name, data)\n      if (!errorOfName) {\n        return\n      }\n      error[name] = errorOfName\n    })\n    return error\n  }\n\n  render() {\n    const { showModal, data } = this.state\n    const error = this.validate(data)\n\n    // 衍生状态\n    const hasError = Object.keys(error).length > 0\n    return (\n      <Box>\n        {showModal === true && (\n          <Card\n            onSubmit={(e) => {\n              e.preventDefault()\n              this.handleIsFormSubmitChange(true)\n              if (hasError) {\n                console.log(\"FORM HAS ERROR\")\n              }\n              console.log(\"state\", this.state)\n              signUp(data)\n            }}\n          >\n            <Close\n              href=\"/\"\n              onClick={() => this.handleShowModalChange(undefined)}\n            >\n              <CloseIcon src={closeIcon} alt=\"close\" />\n            </Close>\n            <InputContainer>\n              <Title>Register</Title>\n              <Label>First Name</Label>\n              <Input\n                value={data.firstName.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"firstName\")}\n                type=\"text\"\n                name=\"firstName\"\n                placeholder=\"Jack\"\n              />\n              <Error>{this.getErrorMessage(error, \"firstName\")}</Error>\n              <Label>Last Name</Label>\n              <Input\n                value={data.lastName.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"lastName\")}\n                type=\"text\"\n                name=\"lastName\"\n                placeholder=\"Anderson\"\n              />\n              <Error>{this.getErrorMessage(error, \"lastName\")}</Error>\n              <Label>Email</Label>\n              <Input\n                value={data.email.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"email\")}\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Jack.anderson@gmail.com\"\n              />\n              <Error>{this.getErrorMessage(error, \"email\")}</Error>\n              <Label>Password</Label>\n              <Input\n                value={data.password.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"password\")}\n                type=\"password\"\n                placeholder=\"********\"\n                id=\"login-password\"\n                name=\"password\"\n              />\n              <Error>{this.getErrorMessage(error, \"password\")}</Error>\n              <Label>Confirm Password</Label>\n              <Input\n                value={data.confirmPassword.value}\n                onChange={this.handleDataChange}\n                onBlur={this.handleBlurredChange}\n                error={this.getErrorMessage(error, \"confirmPassword\")}\n                type=\"password\"\n                placeholder=\"********\"\n                id=\"login-confirm-password\"\n                name=\"confirmPassword\"\n              />\n              <Error>{this.getErrorMessage(error, \"confirmPassword\")}</Error>\n              <Button type=\"submit\" value=\"Continue\" />\n              <Text>\n                Already have an account?<BlueText>Sign in &gt;&gt;</BlueText>\n              </Text>\n            </InputContainer>\n          </Card>\n        )}\n      </Box>\n    )\n  }\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}