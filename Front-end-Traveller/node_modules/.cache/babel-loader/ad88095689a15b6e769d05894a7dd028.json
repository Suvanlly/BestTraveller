{"ast":null,"code":"/* eslint-disable no-undef */\n\n/* eslint-disable no-alert */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable camelcase */\nimport axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\nimport swal from \"sweetalert\";\n\nconst get_tour_info = (tour, isLoading) => ({\n  type: actionTypes.GET_TOUR_INFO,\n  tour,\n  isLoading\n});\n\nexport const getTour = slug => dispatch => {\n  axios.get(`http://127.0.0.1:8000/api/v1/tours/${slug}`).then(response => {\n    const tour = response.data;\n    const isLoading = false;\n    const action = get_tour_info(tour, isLoading);\n    dispatch(action);\n  });\n};\nexport const sendComment = (userFirstName, userImage, content, tour, slug) => dispatch => {\n  console.log(tour);\n  axios({\n    method: \"POST\",\n    url: \"http://127.0.0.1:8000/api/v1/reviews/\",\n    data: {\n      comment: content,\n      user: userFirstName,\n      userImage: userImage,\n      tour: tour._id\n    },\n    withCredentials: true\n  }).then(res => {\n    console.log(res.data);\n    const reviewId = res.data._id;\n    axios({\n      method: \"POST\",\n      url: `http://127.0.0.1:8000/api/v1/tours/${tour._id}/reviews/${reviewId}`,\n      withCredentials: true\n    }).then(() => {\n      swal(\"Thanks!\", \"You have successfully commented!\", \"success\");\n      window.location = `/tours/${slug}`;\n    });\n  });\n};","map":{"version":3,"sources":["/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/pages/Detail/store/actionCreators.js"],"names":["axios","actionTypes","swal","get_tour_info","tour","isLoading","type","GET_TOUR_INFO","getTour","slug","dispatch","get","then","response","data","action","sendComment","userFirstName","userImage","content","console","log","method","url","comment","user","_id","withCredentials","res","reviewId","window","location"],"mappings":"AAAA;;AACA;;AACA;;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEA,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAOC,SAAP,MAAsB;AAC1CC,EAAAA,IAAI,EAAEL,WAAW,CAACM,aADwB;AAE1CH,EAAAA,IAF0C;AAG1CC,EAAAA;AAH0C,CAAtB,CAAtB;;AAMA,OAAO,MAAMG,OAAO,GAAIC,IAAD,IAAWC,QAAD,IAAc;AAC7CV,EAAAA,KAAK,CAACW,GAAN,CAAW,sCAAqCF,IAAK,EAArD,EAAwDG,IAAxD,CAA8DC,QAAD,IAAc;AACzE,UAAMT,IAAI,GAAGS,QAAQ,CAACC,IAAtB;AACA,UAAMT,SAAS,GAAG,KAAlB;AACA,UAAMU,MAAM,GAAGZ,aAAa,CAACC,IAAD,EAAOC,SAAP,CAA5B;AACAK,IAAAA,QAAQ,CAACK,MAAD,CAAR;AACD,GALD;AAMD,CAPM;AASP,OAAO,MAAMC,WAAW,GACtB,CAACC,aAAD,EAAgBC,SAAhB,EAA2BC,OAA3B,EAAoCf,IAApC,EAA0CK,IAA1C,KAAoDC,QAAD,IAAc;AAC/DU,EAAAA,OAAO,CAACC,GAAR,CAAYjB,IAAZ;AACAJ,EAAAA,KAAK,CAAC;AACJsB,IAAAA,MAAM,EAAE,MADJ;AAEJC,IAAAA,GAAG,EAAE,uCAFD;AAGJT,IAAAA,IAAI,EAAE;AACJU,MAAAA,OAAO,EAAEL,OADL;AAEJM,MAAAA,IAAI,EAAER,aAFF;AAGJC,MAAAA,SAAS,EAAEA,SAHP;AAIJd,MAAAA,IAAI,EAAEA,IAAI,CAACsB;AAJP,KAHF;AASJC,IAAAA,eAAe,EAAE;AATb,GAAD,CAAL,CAUGf,IAVH,CAUSgB,GAAD,IAAS;AACfR,IAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACd,IAAhB;AACA,UAAMe,QAAQ,GAAGD,GAAG,CAACd,IAAJ,CAASY,GAA1B;AACA1B,IAAAA,KAAK,CAAC;AACJsB,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,GAAG,EAAG,sCAAqCnB,IAAI,CAACsB,GAAI,YAAWG,QAAS,EAFpE;AAGJF,MAAAA,eAAe,EAAE;AAHb,KAAD,CAAL,CAIGf,IAJH,CAIQ,MAAM;AACZV,MAAAA,IAAI,CAAC,SAAD,EAAY,kCAAZ,EAAgD,SAAhD,CAAJ;AACA4B,MAAAA,MAAM,CAACC,QAAP,GAAmB,UAAStB,IAAK,EAAjC;AACD,KAPD;AAQD,GArBD;AAsBD,CAzBI","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-alert */\n/* eslint-disable no-unused-vars */\n/* eslint-disable camelcase */\nimport axios from \"axios\"\nimport * as actionTypes from \"./actionTypes\"\nimport swal from \"sweetalert\"\n\nconst get_tour_info = (tour, isLoading) => ({\n  type: actionTypes.GET_TOUR_INFO,\n  tour,\n  isLoading,\n})\n\nexport const getTour = (slug) => (dispatch) => {\n  axios.get(`http://127.0.0.1:8000/api/v1/tours/${slug}`).then((response) => {\n    const tour = response.data\n    const isLoading = false\n    const action = get_tour_info(tour, isLoading)\n    dispatch(action)\n  })\n}\n\nexport const sendComment =\n  (userFirstName, userImage, content, tour, slug) => (dispatch) => {\n    console.log(tour)\n    axios({\n      method: \"POST\",\n      url: \"http://127.0.0.1:8000/api/v1/reviews/\",\n      data: {\n        comment: content,\n        user: userFirstName,\n        userImage: userImage,\n        tour: tour._id,\n      },\n      withCredentials: true,\n    }).then((res) => {\n      console.log(res.data)\n      const reviewId = res.data._id\n      axios({\n        method: \"POST\",\n        url: `http://127.0.0.1:8000/api/v1/tours/${tour._id}/reviews/${reviewId}`,\n        withCredentials: true,\n      }).then(() => {\n        swal(\"Thanks!\", \"You have successfully commented!\", \"success\")\n        window.location = `/tours/${slug}`\n      })\n    })\n  }\n"]},"metadata":{},"sourceType":"module"}