{"ast":null,"code":"/* eslint-disable no-undef */\n\n/* eslint-disable no-alert */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable camelcase */\nimport axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\n\nconst get_tour_info = (tour, isLoading) => ({\n  type: actionTypes.GET_TOUR_INFO,\n  tour,\n  isLoading\n});\n\nconst get_tour_info_error = (isLoading, isError) => ({\n  type: actionTypes.GET_TOUR_INFO_ERROR,\n  isLoading,\n  isError\n});\n\nexport const getTour = slug => dispatch => {\n  console.log(slug);\n  axios.get(`http://127.0.0.1:8000/api/v1/tours/${slug}`).then(response => {\n    const tour = response.data;\n    const isLoading = false;\n    const action = get_tour_info(tour, isLoading);\n    dispatch(action);\n  }).catch(err => {\n    const isLoading = false;\n    const isError = true;\n    const action = get_tour_info_error(isLoading, isError);\n    dispatch(action);\n  });\n};\nexport const sendComment = (userFirstName, userImage, content, tour, slug) => dispatch => {\n  console.log(slug);\n  axios({\n    method: \"POST\",\n    url: \"http://127.0.0.1:8000/api/v1/reviews/\",\n    data: {\n      comment: content,\n      user: userFirstName,\n      userImage: userImage,\n      tour: tour._id\n    },\n    withCredentials: true\n  }).then(res => {\n    console.log(res.data);\n    const reviewId = res.data._id;\n    axios({\n      method: \"POST\",\n      url: `http://127.0.0.1:8000/api/v1/tours/${tour._id}/reviews/${reviewId}`,\n      withCredentials: true\n    }).then(() => {\n      alert(\"Successfully comment\");\n      window.location = `/tours/${slug}`;\n    });\n  });\n};","map":{"version":3,"sources":["/Users/sophiesun/Desktop/Bestraveller/front-end-traveler/src/pages/Detail/store/actionCreators.js"],"names":["axios","actionTypes","get_tour_info","tour","isLoading","type","GET_TOUR_INFO","get_tour_info_error","isError","GET_TOUR_INFO_ERROR","getTour","slug","dispatch","console","log","get","then","response","data","action","catch","err","sendComment","userFirstName","userImage","content","method","url","comment","user","_id","withCredentials","res","reviewId","alert","window","location"],"mappings":"AAAA;;AACA;;AACA;;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;;AAEA,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAOC,SAAP,MAAsB;AAC1CC,EAAAA,IAAI,EAAEJ,WAAW,CAACK,aADwB;AAE1CH,EAAAA,IAF0C;AAG1CC,EAAAA;AAH0C,CAAtB,CAAtB;;AAMA,MAAMG,mBAAmB,GAAG,CAACH,SAAD,EAAYI,OAAZ,MAAyB;AACnDH,EAAAA,IAAI,EAAEJ,WAAW,CAACQ,mBADiC;AAEnDL,EAAAA,SAFmD;AAGnDI,EAAAA;AAHmD,CAAzB,CAA5B;;AAMA,OAAO,MAAME,OAAO,GAAIC,IAAD,IAAWC,QAAD,IAAc;AAC7CC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAX,EAAAA,KAAK,CACFe,GADH,CACQ,sCAAqCJ,IAAK,EADlD,EAEGK,IAFH,CAESC,QAAD,IAAc;AAClB,UAAMd,IAAI,GAAGc,QAAQ,CAACC,IAAtB;AACA,UAAMd,SAAS,GAAG,KAAlB;AACA,UAAMe,MAAM,GAAGjB,aAAa,CAACC,IAAD,EAAOC,SAAP,CAA5B;AACAQ,IAAAA,QAAQ,CAACO,MAAD,CAAR;AACD,GAPH,EAQGC,KARH,CAQUC,GAAD,IAAS;AACd,UAAMjB,SAAS,GAAG,KAAlB;AACA,UAAMI,OAAO,GAAG,IAAhB;AACA,UAAMW,MAAM,GAAGZ,mBAAmB,CAACH,SAAD,EAAYI,OAAZ,CAAlC;AACAI,IAAAA,QAAQ,CAACO,MAAD,CAAR;AACD,GAbH;AAcD,CAhBM;AAkBP,OAAO,MAAMG,WAAW,GACtB,CAACC,aAAD,EAAgBC,SAAhB,EAA2BC,OAA3B,EAAoCtB,IAApC,EAA0CQ,IAA1C,KAAoDC,QAAD,IAAc;AAC/DC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAX,EAAAA,KAAK,CAAC;AACJ0B,IAAAA,MAAM,EAAE,MADJ;AAEJC,IAAAA,GAAG,EAAE,uCAFD;AAGJT,IAAAA,IAAI,EAAE;AACJU,MAAAA,OAAO,EAAEH,OADL;AAEJI,MAAAA,IAAI,EAAEN,aAFF;AAGJC,MAAAA,SAAS,EAAEA,SAHP;AAIJrB,MAAAA,IAAI,EAAEA,IAAI,CAAC2B;AAJP,KAHF;AASJC,IAAAA,eAAe,EAAE;AATb,GAAD,CAAL,CAUGf,IAVH,CAUSgB,GAAD,IAAS;AACfnB,IAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAG,CAACd,IAAhB;AACA,UAAMe,QAAQ,GAAGD,GAAG,CAACd,IAAJ,CAASY,GAA1B;AACA9B,IAAAA,KAAK,CAAC;AACJ0B,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,GAAG,EAAG,sCAAqCxB,IAAI,CAAC2B,GAAI,YAAWG,QAAS,EAFpE;AAGJF,MAAAA,eAAe,EAAE;AAHb,KAAD,CAAL,CAIGf,IAJH,CAIQ,MAAM;AACZkB,MAAAA,KAAK,CAAC,sBAAD,CAAL;AACAC,MAAAA,MAAM,CAACC,QAAP,GAAmB,UAASzB,IAAK,EAAjC;AACD,KAPD;AAQD,GArBD;AAsBD,CAzBI","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-alert */\n/* eslint-disable no-unused-vars */\n/* eslint-disable camelcase */\nimport axios from \"axios\"\nimport * as actionTypes from \"./actionTypes\"\n\nconst get_tour_info = (tour, isLoading) => ({\n  type: actionTypes.GET_TOUR_INFO,\n  tour,\n  isLoading,\n})\n\nconst get_tour_info_error = (isLoading, isError) => ({\n  type: actionTypes.GET_TOUR_INFO_ERROR,\n  isLoading,\n  isError,\n})\n\nexport const getTour = (slug) => (dispatch) => {\n  console.log(slug)\n  axios\n    .get(`http://127.0.0.1:8000/api/v1/tours/${slug}`)\n    .then((response) => {\n      const tour = response.data\n      const isLoading = false\n      const action = get_tour_info(tour, isLoading)\n      dispatch(action)\n    })\n    .catch((err) => {\n      const isLoading = false\n      const isError = true\n      const action = get_tour_info_error(isLoading, isError)\n      dispatch(action)\n    })\n}\n\nexport const sendComment =\n  (userFirstName, userImage, content, tour, slug) => (dispatch) => {\n    console.log(slug)\n    axios({\n      method: \"POST\",\n      url: \"http://127.0.0.1:8000/api/v1/reviews/\",\n      data: {\n        comment: content,\n        user: userFirstName,\n        userImage: userImage,\n        tour: tour._id,\n      },\n      withCredentials: true,\n    }).then((res) => {\n      console.log(res.data)\n      const reviewId = res.data._id\n      axios({\n        method: \"POST\",\n        url: `http://127.0.0.1:8000/api/v1/tours/${tour._id}/reviews/${reviewId}`,\n        withCredentials: true,\n      }).then(() => {\n        alert(\"Successfully comment\")\n        window.location = `/tours/${slug}`\n      })\n    })\n  }\n"]},"metadata":{},"sourceType":"module"}